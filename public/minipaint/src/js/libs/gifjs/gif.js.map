{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///gif.js","webpack:///webpack/bootstrap c4508600e32c0e7f0139","webpack:///./src/gif.coffee","webpack:///./~/events/events.js","webpack:///./src/browser.coffee"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","EventEmitter","GIF","browser","extend","child","parent","ctor","constructor","key","hasProp","prototype","__super__","hasOwnProperty","indexOf","item","i","l","length","superClass","options","base","value","running","frames","groups","Map","freeWorkers","activeWorkers","setOptions","defaults","frameDefaults","workerScript","workers","repeat","background","quality","width","height","transparent","debug","delay","copy","setOption","_canvas","results","push","addFrame","image","frame","index","ImageData","data","CanvasRenderingContext2D","WebGLRenderingContext","getContextData","context","childNodes","Error","getImageData","has","get","set","render","j","numWorkers","ref","nextFrame","finishedFrames","imageParts","spawnWorkers","globalPalette","renderNextFrame","emit","abort","worker","shift","log","terminate","Math","min","apply","forEach","_this","Worker","onmessage","event","splice","frameFinished","duplicate","indexOfDuplicate","indexOfFirstInGroup","finishRendering","k","len","len1","len2","len3","len4","offset","page","ref1","ref2","ref3","pageSize","cursor","round","Uint8Array","Blob","type","task","setTimeout","getTask","postMessage","ctx","document","createElement","getContext","setFill","fillRect","drawImage","last","dither","canTransfer","msg","console","_events","_maxListeners","undefined","isFunction","arg","isNumber","isObject","isUndefined","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","er","handler","args","listeners","error","arguments","err","Array","slice","addListener","listener","newListener","warned","trace","on","once","g","removeListener","fired","list","position","removeAllListeners","ret","listenerCount","evlistener","emitter","UA","mode","platform","ua","navigator","userAgent","toLowerCase","match","documentMode","name","version","parseFloat","parseInt"],"mappings":"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","file":"gif.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GIF\"] = factory();\n\telse\n\t\troot[\"GIF\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"GIF\"] = factory();\n\telse\n\t\troot[\"GIF\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar EventEmitter, GIF, browser,\n\t  extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n\t  hasProp = {}.hasOwnProperty,\n\t  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };\n\t\n\tEventEmitter = __webpack_require__(1).EventEmitter;\n\t\n\tbrowser = __webpack_require__(2);\n\t\n\tGIF = (function(superClass) {\n\t  var defaults, frameDefaults;\n\t\n\t  extend(GIF, superClass);\n\t\n\t  defaults = {\n\t    workerScript: 'gif.worker.js',\n\t    workers: 2,\n\t    repeat: 0,\n\t    background: '#fff',\n\t    quality: 10,\n\t    width: null,\n\t    height: null,\n\t    transparent: null,\n\t    debug: false\n\t  };\n\t\n\t  frameDefaults = {\n\t    delay: 500,\n\t    copy: false\n\t  };\n\t\n\t  function GIF(options) {\n\t    var base, key, value;\n\t    this.running = false;\n\t    this.options = {};\n\t    this.frames = [];\n\t    this.groups = new Map();\n\t    this.freeWorkers = [];\n\t    this.activeWorkers = [];\n\t    this.setOptions(options);\n\t    for (key in defaults) {\n\t      value = defaults[key];\n\t      if ((base = this.options)[key] == null) {\n\t        base[key] = value;\n\t      }\n\t    }\n\t  }\n\t\n\t  GIF.prototype.setOption = function(key, value) {\n\t    this.options[key] = value;\n\t    if ((this._canvas != null) && (key === 'width' || key === 'height')) {\n\t      return this._canvas[key] = value;\n\t    }\n\t  };\n\t\n\t  GIF.prototype.setOptions = function(options) {\n\t    var key, results, value;\n\t    results = [];\n\t    for (key in options) {\n\t      if (!hasProp.call(options, key)) continue;\n\t      value = options[key];\n\t      results.push(this.setOption(key, value));\n\t    }\n\t    return results;\n\t  };\n\t\n\t  GIF.prototype.addFrame = function(image, options) {\n\t    var frame, index, key;\n\t    if (options == null) {\n\t      options = {};\n\t    }\n\t    frame = {};\n\t    frame.transparent = this.options.transparent;\n\t    for (key in frameDefaults) {\n\t      frame[key] = options[key] || frameDefaults[key];\n\t    }\n\t    if (this.options.width == null) {\n\t      this.setOption('width', image.width);\n\t    }\n\t    if (this.options.height == null) {\n\t      this.setOption('height', image.height);\n\t    }\n\t    if ((typeof ImageData !== \"undefined\" && ImageData !== null) && image instanceof ImageData) {\n\t      frame.data = image.data;\n\t    } else if (((typeof CanvasRenderingContext2D !== \"undefined\" && CanvasRenderingContext2D !== null) && image instanceof CanvasRenderingContext2D) || ((typeof WebGLRenderingContext !== \"undefined\" && WebGLRenderingContext !== null) && image instanceof WebGLRenderingContext)) {\n\t      if (options.copy) {\n\t        frame.data = this.getContextData(image);\n\t      } else {\n\t        frame.context = image;\n\t      }\n\t    } else if (image.childNodes != null) {\n\t      if (options.copy) {\n\t        frame.data = this.getImageData(image);\n\t      } else {\n\t        frame.image = image;\n\t      }\n\t    } else {\n\t      throw new Error('Invalid image');\n\t    }\n\t    index = this.frames.length;\n\t    if (index > 0 && frame.data) {\n\t      if (this.groups.has(frame.data)) {\n\t        this.groups.get(frame.data).push(index);\n\t      } else {\n\t        this.groups.set(frame.data, [index]);\n\t      }\n\t    }\n\t    return this.frames.push(frame);\n\t  };\n\t\n\t  GIF.prototype.render = function() {\n\t    var i, j, numWorkers, ref;\n\t    if (this.running) {\n\t      throw new Error('Already running');\n\t    }\n\t    if ((this.options.width == null) || (this.options.height == null)) {\n\t      throw new Error('Width and height must be set prior to rendering');\n\t    }\n\t    this.running = true;\n\t    this.nextFrame = 0;\n\t    this.finishedFrames = 0;\n\t    this.imageParts = (function() {\n\t      var j, ref, results;\n\t      results = [];\n\t      for (i = j = 0, ref = this.frames.length; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n\t        results.push(null);\n\t      }\n\t      return results;\n\t    }).call(this);\n\t    numWorkers = this.spawnWorkers();\n\t    if (this.options.globalPalette === true) {\n\t      this.renderNextFrame();\n\t    } else {\n\t      for (i = j = 0, ref = numWorkers; 0 <= ref ? j < ref : j > ref; i = 0 <= ref ? ++j : --j) {\n\t        this.renderNextFrame();\n\t      }\n\t    }\n\t    this.emit('start');\n\t    return this.emit('progress', 0);\n\t  };\n\t\n\t  GIF.prototype.abort = function() {\n\t    var worker;\n\t    while (true) {\n\t      worker = this.activeWorkers.shift();\n\t      if (worker == null) {\n\t        break;\n\t      }\n\t      this.log(\"killing active worker\");\n\t      worker.terminate();\n\t    }\n\t    this.running = false;\n\t    return this.emit('abort');\n\t  };\n\t\n\t  GIF.prototype.spawnWorkers = function() {\n\t    var j, numWorkers, ref, results;\n\t    numWorkers = Math.min(this.options.workers, this.frames.length);\n\t    (function() {\n\t      results = [];\n\t      for (var j = ref = this.freeWorkers.length; ref <= numWorkers ? j < numWorkers : j > numWorkers; ref <= numWorkers ? j++ : j--){ results.push(j); }\n\t      return results;\n\t    }).apply(this).forEach((function(_this) {\n\t      return function(i) {\n\t        var worker;\n\t        _this.log(\"spawning worker \" + i);\n\t        worker = new Worker(_this.options.workerScript);\n\t        worker.onmessage = function(event) {\n\t          _this.activeWorkers.splice(_this.activeWorkers.indexOf(worker), 1);\n\t          _this.freeWorkers.push(worker);\n\t          return _this.frameFinished(event.data, false);\n\t        };\n\t        return _this.freeWorkers.push(worker);\n\t      };\n\t    })(this));\n\t    return numWorkers;\n\t  };\n\t\n\t  GIF.prototype.frameFinished = function(frame, duplicate) {\n\t    var i, indexOfDuplicate, indexOfFirstInGroup, j, ref;\n\t    this.finishedFrames++;\n\t    if (!duplicate) {\n\t      this.log(\"frame \" + (frame.index + 1) + \" finished - \" + this.activeWorkers.length + \" active\");\n\t      this.emit('progress', this.finishedFrames / this.frames.length);\n\t      this.imageParts[frame.index] = frame;\n\t    } else {\n\t      indexOfDuplicate = this.frames.indexOf(frame);\n\t      indexOfFirstInGroup = this.groups.get(frame.data)[0];\n\t      this.log(\"frame \" + (indexOfDuplicate + 1) + \" is duplicate of \" + indexOfFirstInGroup + \" - \" + this.activeWorkers.length + \" active\");\n\t      this.imageParts[indexOfDuplicate] = {\n\t        indexOfFirstInGroup: indexOfFirstInGroup\n\t      };\n\t    }\n\t    if (this.options.globalPalette === true && !duplicate) {\n\t      this.options.globalPalette = frame.globalPalette;\n\t      this.log(\"global palette analyzed\");\n\t      if (this.frames.length > 2) {\n\t        for (i = j = 1, ref = this.freeWorkers.length; 1 <= ref ? j < ref : j > ref; i = 1 <= ref ? ++j : --j) {\n\t          this.renderNextFrame();\n\t        }\n\t      }\n\t    }\n\t    if (indexOf.call(this.imageParts, null) >= 0) {\n\t      return this.renderNextFrame();\n\t    } else {\n\t      return this.finishRendering();\n\t    }\n\t  };\n\t\n\t  GIF.prototype.finishRendering = function() {\n\t    var data, frame, i, image, index, j, k, l, len, len1, len2, len3, len4, m, offset, page, ref, ref1, ref2, ref3;\n\t    ref = this.imageParts;\n\t    for (index = j = 0, len1 = ref.length; j < len1; index = ++j) {\n\t      frame = ref[index];\n\t      if (frame.indexOfFirstInGroup) {\n\t        this.imageParts[index] = this.imageParts[frame.indexOfFirstInGroup];\n\t      }\n\t    }\n\t    len = 0;\n\t    ref1 = this.imageParts;\n\t    for (k = 0, len2 = ref1.length; k < len2; k++) {\n\t      frame = ref1[k];\n\t      len += (frame.data.length - 1) * frame.pageSize + frame.cursor;\n\t    }\n\t    len += frame.pageSize - frame.cursor;\n\t    this.log(\"rendering finished - filesize \" + (Math.round(len / 1000)) + \"kb\");\n\t    data = new Uint8Array(len);\n\t    offset = 0;\n\t    ref2 = this.imageParts;\n\t    for (l = 0, len3 = ref2.length; l < len3; l++) {\n\t      frame = ref2[l];\n\t      ref3 = frame.data;\n\t      for (i = m = 0, len4 = ref3.length; m < len4; i = ++m) {\n\t        page = ref3[i];\n\t        data.set(page, offset);\n\t        if (i === frame.data.length - 1) {\n\t          offset += frame.cursor;\n\t        } else {\n\t          offset += frame.pageSize;\n\t        }\n\t      }\n\t    }\n\t    image = new Blob([data], {\n\t      type: 'image/gif'\n\t    });\n\t    return this.emit('finished', image, data);\n\t  };\n\t\n\t  GIF.prototype.renderNextFrame = function() {\n\t    var frame, index, task, worker;\n\t    if (this.freeWorkers.length === 0) {\n\t      throw new Error('No free workers');\n\t    }\n\t    if (this.nextFrame >= this.frames.length) {\n\t      return;\n\t    }\n\t    frame = this.frames[this.nextFrame++];\n\t    index = this.frames.indexOf(frame);\n\t    if (index > 0 && this.groups.has(frame.data) && this.groups.get(frame.data)[0] !== index) {\n\t      setTimeout((function(_this) {\n\t        return function() {\n\t          return _this.frameFinished(frame, true);\n\t        };\n\t      })(this), 0);\n\t      return;\n\t    }\n\t    worker = this.freeWorkers.shift();\n\t    task = this.getTask(frame);\n\t    this.log(\"starting frame \" + (task.index + 1) + \" of \" + this.frames.length);\n\t    this.activeWorkers.push(worker);\n\t    return worker.postMessage(task);\n\t  };\n\t\n\t  GIF.prototype.getContextData = function(ctx) {\n\t    return ctx.getImageData(0, 0, this.options.width, this.options.height).data;\n\t  };\n\t\n\t  GIF.prototype.getImageData = function(image) {\n\t    var ctx;\n\t    if (this._canvas == null) {\n\t      this._canvas = document.createElement('canvas');\n\t      this._canvas.width = this.options.width;\n\t      this._canvas.height = this.options.height;\n\t    }\n\t    ctx = this._canvas.getContext('2d');\n\t    ctx.setFill = this.options.background;\n\t    ctx.fillRect(0, 0, this.options.width, this.options.height);\n\t    ctx.drawImage(image, 0, 0);\n\t    return this.getContextData(ctx);\n\t  };\n\t\n\t  GIF.prototype.getTask = function(frame) {\n\t    var index, task;\n\t    index = this.frames.indexOf(frame);\n\t    task = {\n\t      index: index,\n\t      last: index === (this.frames.length - 1),\n\t      delay: frame.delay,\n\t      transparent: frame.transparent,\n\t      width: this.options.width,\n\t      height: this.options.height,\n\t      quality: this.options.quality,\n\t      dither: this.options.dither,\n\t      globalPalette: this.options.globalPalette,\n\t      repeat: this.options.repeat,\n\t      canTransfer: true\n\t    };\n\t    if (frame.data != null) {\n\t      task.data = frame.data;\n\t    } else if (frame.context != null) {\n\t      task.data = this.getContextData(frame.context);\n\t    } else if (frame.image != null) {\n\t      task.data = this.getImageData(frame.image);\n\t    } else {\n\t      throw new Error('Invalid frame');\n\t    }\n\t    return task;\n\t  };\n\t\n\t  GIF.prototype.log = function(msg) {\n\t    if (this.options.debug) {\n\t      return console.log(msg);\n\t    }\n\t  };\n\t\n\t  return GIF;\n\t\n\t})(EventEmitter);\n\t\n\tmodule.exports = GIF;\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t// Copyright Joyent, Inc. and other Node contributors.\n\t//\n\t// Permission is hereby granted, free of charge, to any person obtaining a\n\t// copy of this software and associated documentation files (the\n\t// \"Software\"), to deal in the Software without restriction, including\n\t// without limitation the rights to use, copy, modify, merge, publish,\n\t// distribute, sublicense, and/or sell copies of the Software, and to permit\n\t// persons to whom the Software is furnished to do so, subject to the\n\t// following conditions:\n\t//\n\t// The above copyright notice and this permission notice shall be included\n\t// in all copies or substantial portions of the Software.\n\t//\n\t// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n\t// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n\t// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n\t// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n\t// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n\t// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n\t// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\t\n\tfunction EventEmitter() {\n\t  this._events = this._events || {};\n\t  this._maxListeners = this._maxListeners || undefined;\n\t}\n\tmodule.exports = EventEmitter;\n\t\n\t// Backwards-compat with node 0.10.x\n\tEventEmitter.EventEmitter = EventEmitter;\n\t\n\tEventEmitter.prototype._events = undefined;\n\tEventEmitter.prototype._maxListeners = undefined;\n\t\n\t// By default EventEmitters will print a warning if more than 10 listeners are\n\t// added to it. This is a useful default which helps finding memory leaks.\n\tEventEmitter.defaultMaxListeners = 10;\n\t\n\t// Obviously not all Emitters should be limited to 10. This function allows\n\t// that to be increased. Set to zero for unlimited.\n\tEventEmitter.prototype.setMaxListeners = function(n) {\n\t  if (!isNumber(n) || n < 0 || isNaN(n))\n\t    throw TypeError('n must be a positive number');\n\t  this._maxListeners = n;\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.emit = function(type) {\n\t  var er, handler, len, args, i, listeners;\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // If there is no 'error' event listener then throw.\n\t  if (type === 'error') {\n\t    if (!this._events.error ||\n\t        (isObject(this._events.error) && !this._events.error.length)) {\n\t      er = arguments[1];\n\t      if (er instanceof Error) {\n\t        throw er; // Unhandled 'error' event\n\t      } else {\n\t        // At least give some kind of context to the user\n\t        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n\t        err.context = er;\n\t        throw err;\n\t      }\n\t    }\n\t  }\n\t\n\t  handler = this._events[type];\n\t\n\t  if (isUndefined(handler))\n\t    return false;\n\t\n\t  if (isFunction(handler)) {\n\t    switch (arguments.length) {\n\t      // fast cases\n\t      case 1:\n\t        handler.call(this);\n\t        break;\n\t      case 2:\n\t        handler.call(this, arguments[1]);\n\t        break;\n\t      case 3:\n\t        handler.call(this, arguments[1], arguments[2]);\n\t        break;\n\t      // slower\n\t      default:\n\t        args = Array.prototype.slice.call(arguments, 1);\n\t        handler.apply(this, args);\n\t    }\n\t  } else if (isObject(handler)) {\n\t    args = Array.prototype.slice.call(arguments, 1);\n\t    listeners = handler.slice();\n\t    len = listeners.length;\n\t    for (i = 0; i < len; i++)\n\t      listeners[i].apply(this, args);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tEventEmitter.prototype.addListener = function(type, listener) {\n\t  var m;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events)\n\t    this._events = {};\n\t\n\t  // To avoid recursion in the case that type === \"newListener\"! Before\n\t  // adding it to the listeners, first emit \"newListener\".\n\t  if (this._events.newListener)\n\t    this.emit('newListener', type,\n\t              isFunction(listener.listener) ?\n\t              listener.listener : listener);\n\t\n\t  if (!this._events[type])\n\t    // Optimize the case of one listener. Don't need the extra array object.\n\t    this._events[type] = listener;\n\t  else if (isObject(this._events[type]))\n\t    // If we've already got an array, just append.\n\t    this._events[type].push(listener);\n\t  else\n\t    // Adding the second element, need to change to array.\n\t    this._events[type] = [this._events[type], listener];\n\t\n\t  // Check for listener leak\n\t  if (isObject(this._events[type]) && !this._events[type].warned) {\n\t    if (!isUndefined(this._maxListeners)) {\n\t      m = this._maxListeners;\n\t    } else {\n\t      m = EventEmitter.defaultMaxListeners;\n\t    }\n\t\n\t    if (m && m > 0 && this._events[type].length > m) {\n\t      this._events[type].warned = true;\n\t      console.error('(node) warning: possible EventEmitter memory ' +\n\t                    'leak detected. %d listeners added. ' +\n\t                    'Use emitter.setMaxListeners() to increase limit.',\n\t                    this._events[type].length);\n\t      if (typeof console.trace === 'function') {\n\t        // not supported in IE 10\n\t        console.trace();\n\t      }\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\t\n\tEventEmitter.prototype.once = function(type, listener) {\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  var fired = false;\n\t\n\t  function g() {\n\t    this.removeListener(type, g);\n\t\n\t    if (!fired) {\n\t      fired = true;\n\t      listener.apply(this, arguments);\n\t    }\n\t  }\n\t\n\t  g.listener = listener;\n\t  this.on(type, g);\n\t\n\t  return this;\n\t};\n\t\n\t// emits a 'removeListener' event iff the listener was removed\n\tEventEmitter.prototype.removeListener = function(type, listener) {\n\t  var list, position, length, i;\n\t\n\t  if (!isFunction(listener))\n\t    throw TypeError('listener must be a function');\n\t\n\t  if (!this._events || !this._events[type])\n\t    return this;\n\t\n\t  list = this._events[type];\n\t  length = list.length;\n\t  position = -1;\n\t\n\t  if (list === listener ||\n\t      (isFunction(list.listener) && list.listener === listener)) {\n\t    delete this._events[type];\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t\n\t  } else if (isObject(list)) {\n\t    for (i = length; i-- > 0;) {\n\t      if (list[i] === listener ||\n\t          (list[i].listener && list[i].listener === listener)) {\n\t        position = i;\n\t        break;\n\t      }\n\t    }\n\t\n\t    if (position < 0)\n\t      return this;\n\t\n\t    if (list.length === 1) {\n\t      list.length = 0;\n\t      delete this._events[type];\n\t    } else {\n\t      list.splice(position, 1);\n\t    }\n\t\n\t    if (this._events.removeListener)\n\t      this.emit('removeListener', type, listener);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.removeAllListeners = function(type) {\n\t  var key, listeners;\n\t\n\t  if (!this._events)\n\t    return this;\n\t\n\t  // not listening for removeListener, no need to emit\n\t  if (!this._events.removeListener) {\n\t    if (arguments.length === 0)\n\t      this._events = {};\n\t    else if (this._events[type])\n\t      delete this._events[type];\n\t    return this;\n\t  }\n\t\n\t  // emit removeListener for all listeners on all events\n\t  if (arguments.length === 0) {\n\t    for (key in this._events) {\n\t      if (key === 'removeListener') continue;\n\t      this.removeAllListeners(key);\n\t    }\n\t    this.removeAllListeners('removeListener');\n\t    this._events = {};\n\t    return this;\n\t  }\n\t\n\t  listeners = this._events[type];\n\t\n\t  if (isFunction(listeners)) {\n\t    this.removeListener(type, listeners);\n\t  } else if (listeners) {\n\t    // LIFO order\n\t    while (listeners.length)\n\t      this.removeListener(type, listeners[listeners.length - 1]);\n\t  }\n\t  delete this._events[type];\n\t\n\t  return this;\n\t};\n\t\n\tEventEmitter.prototype.listeners = function(type) {\n\t  var ret;\n\t  if (!this._events || !this._events[type])\n\t    ret = [];\n\t  else if (isFunction(this._events[type]))\n\t    ret = [this._events[type]];\n\t  else\n\t    ret = this._events[type].slice();\n\t  return ret;\n\t};\n\t\n\tEventEmitter.prototype.listenerCount = function(type) {\n\t  if (this._events) {\n\t    var evlistener = this._events[type];\n\t\n\t    if (isFunction(evlistener))\n\t      return 1;\n\t    else if (evlistener)\n\t      return evlistener.length;\n\t  }\n\t  return 0;\n\t};\n\t\n\tEventEmitter.listenerCount = function(emitter, type) {\n\t  return emitter.listenerCount(type);\n\t};\n\t\n\tfunction isFunction(arg) {\n\t  return typeof arg === 'function';\n\t}\n\t\n\tfunction isNumber(arg) {\n\t  return typeof arg === 'number';\n\t}\n\t\n\tfunction isObject(arg) {\n\t  return typeof arg === 'object' && arg !== null;\n\t}\n\t\n\tfunction isUndefined(arg) {\n\t  return arg === void 0;\n\t}\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\n\t/* CoffeeScript version of the browser detection from MooTools */\n\tvar UA, browser, mode, platform, ua;\n\t\n\tua = navigator.userAgent.toLowerCase();\n\t\n\tplatform = navigator.platform.toLowerCase();\n\t\n\tUA = ua.match(/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/) || [null, 'unknown', 0];\n\t\n\tmode = UA[1] === 'ie' && document.documentMode;\n\t\n\tbrowser = {\n\t  name: UA[1] === 'version' ? UA[3] : UA[1],\n\t  version: mode || parseFloat(UA[1] === 'opera' && UA[4] ? UA[4] : UA[2]),\n\t  platform: {\n\t    name: ua.match(/ip(?:ad|od|hone)/) ? 'ios' : (ua.match(/(?:webos|android)/) || platform.match(/mac|win|linux/) || ['other'])[0]\n\t  }\n\t};\n\t\n\tbrowser[browser.name] = true;\n\t\n\tbrowser[browser.name + parseInt(browser.version, 10)] = true;\n\t\n\tbrowser.platform[browser.platform.name] = true;\n\t\n\tmodule.exports = browser;\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** gif.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap c4508600e32c0e7f0139\n **/","{EventEmitter} = require 'events'\r\nbrowser = require './browser.coffee'\r\n\r\nclass GIF extends EventEmitter\r\n\r\n  defaults =\r\n    workerScript: 'gif.worker.js'\r\n    workers: 2\r\n    repeat: 0 # repeat forever, -1 = repeat once\r\n    background: '#fff'\r\n    quality: 10 # pixel sample interval, lower is better\r\n    width: null # size derermined from first frame if possible\r\n    height: null\r\n    transparent: null\r\n    debug: false\r\n\r\n  frameDefaults =\r\n    delay: 500 # ms\r\n    copy: false\r\n\r\n  constructor: (options) ->\r\n    @running = false\r\n\r\n    @options = {}\r\n    @frames = []\r\n\r\n    # TODO: compare by instance and not by data\r\n    @groups = new Map() # for [data1, data1, data2, data1] @groups[data1] == [1, 3] and @groups[data2] = [2]\r\n\r\n    @freeWorkers = []\r\n    @activeWorkers = []\r\n\r\n    @setOptions options\r\n    for key, value of defaults\r\n      @options[key] ?= value\r\n\r\n  setOption: (key, value) ->\r\n    @options[key] = value\r\n    if @_canvas? and key in ['width', 'height']\r\n      @_canvas[key] = value\r\n\r\n  setOptions: (options) ->\r\n    @setOption key, value for own key, value of options\r\n\r\n  addFrame: (image, options={}) ->\r\n    frame = {}\r\n    frame.transparent = @options.transparent\r\n    for key of frameDefaults\r\n      frame[key] = options[key] or frameDefaults[key]\r\n\r\n    # use the images width and height for options unless already set\r\n    @setOption 'width', image.width unless @options.width?\r\n    @setOption 'height', image.height unless @options.height?\r\n\r\n    if ImageData? and image instanceof ImageData\r\n       frame.data = image.data\r\n    else if (CanvasRenderingContext2D? and image instanceof CanvasRenderingContext2D) or (WebGLRenderingContext? and image instanceof WebGLRenderingContext)\r\n      if options.copy\r\n        frame.data = @getContextData image\r\n      else\r\n        frame.context = image\r\n    else if image.childNodes?\r\n      if options.copy\r\n        frame.data = @getImageData image\r\n      else\r\n        frame.image = image\r\n    else\r\n      throw new Error 'Invalid image'\r\n\r\n    # find duplicates in frames.data\r\n    index = @frames.length\r\n    if index > 0 and frame.data # frame 0 contains header, do not count it\r\n      if @groups.has(frame.data)\r\n        @groups.get(frame.data).push index\r\n      else\r\n        @groups.set frame.data, [index]\r\n\r\n    @frames.push frame\r\n\r\n  render: ->\r\n    throw new Error 'Already running' if @running\r\n\r\n    if not @options.width? or not @options.height?\r\n      throw new Error 'Width and height must be set prior to rendering'\r\n\r\n    @running = true\r\n    @nextFrame = 0\r\n    @finishedFrames = 0\r\n\r\n    @imageParts = (null for i in [0...@frames.length])\r\n    numWorkers = @spawnWorkers()\r\n    # we need to wait for the palette\r\n    if @options.globalPalette == true\r\n      @renderNextFrame()\r\n    else\r\n      @renderNextFrame() for i in [0...numWorkers]\r\n\r\n    @emit 'start'\r\n    @emit 'progress', 0\r\n\r\n  abort: ->\r\n    loop\r\n      worker = @activeWorkers.shift()\r\n      break unless worker?\r\n      @log \"killing active worker\"\r\n      worker.terminate()\r\n    @running = false\r\n    @emit 'abort'\r\n\r\n  # private\r\n\r\n  spawnWorkers: ->\r\n    numWorkers = Math.min(@options.workers, @frames.length)\r\n    [@freeWorkers.length...numWorkers].forEach (i) =>\r\n      @log \"spawning worker #{ i }\"\r\n      worker = new Worker @options.workerScript\r\n      worker.onmessage = (event) =>\r\n        @activeWorkers.splice @activeWorkers.indexOf(worker), 1\r\n        @freeWorkers.push worker\r\n        @frameFinished event.data, false\r\n      @freeWorkers.push worker\r\n    return numWorkers\r\n\r\n  frameFinished: (frame, duplicate) ->\r\n    @finishedFrames++\r\n    if not duplicate\r\n      @log \"frame #{ frame.index + 1 } finished - #{ @activeWorkers.length } active\"\r\n      @emit 'progress', @finishedFrames / @frames.length\r\n      @imageParts[frame.index] = frame\r\n    else\r\n      indexOfDuplicate = @frames.indexOf frame\r\n      indexOfFirstInGroup = @groups.get(frame.data)[0]\r\n      @log \"frame #{ indexOfDuplicate + 1 } is duplicate of #{ indexOfFirstInGroup } - #{ @activeWorkers.length } active\"\r\n      @imageParts[indexOfDuplicate] = { indexOfFirstInGroup: indexOfFirstInGroup } # do not put frame here, as it may not be available still. Put index.\r\n    # remember calculated palette, spawn the rest of the workers\r\n    if @options.globalPalette == true and not duplicate\r\n      @options.globalPalette = frame.globalPalette\r\n      @log \"global palette analyzed\"\r\n      @renderNextFrame() for i in [1...@freeWorkers.length] if @frames.length > 2\r\n    if null in @imageParts\r\n      @renderNextFrame()\r\n    else\r\n      @finishRendering()\r\n\r\n  finishRendering: ->\r\n    for frame, index in @imageParts\r\n      @imageParts[index] = @imageParts[frame.indexOfFirstInGroup] if frame.indexOfFirstInGroup\r\n    len = 0\r\n    for frame in @imageParts\r\n      len += (frame.data.length - 1) * frame.pageSize + frame.cursor\r\n    len += frame.pageSize - frame.cursor\r\n    @log \"rendering finished - filesize #{ Math.round(len / 1000) }kb\"\r\n    data = new Uint8Array len\r\n    offset = 0\r\n    for frame in @imageParts\r\n      for page, i in frame.data\r\n        data.set page, offset\r\n        if i is frame.data.length - 1\r\n          offset += frame.cursor\r\n        else\r\n          offset += frame.pageSize\r\n\r\n    image = new Blob [data],\r\n      type: 'image/gif'\r\n\r\n    @emit 'finished', image, data\r\n\r\n  renderNextFrame: ->\r\n    throw new Error 'No free workers' if @freeWorkers.length is 0\r\n    return if @nextFrame >= @frames.length # no new frame to render\r\n\r\n    frame = @frames[@nextFrame++]\r\n\r\n    # check if one of duplicates, but not the first in group\r\n    index = @frames.indexOf frame\r\n    if index > 0 and @groups.has(frame.data) and @groups.get(frame.data)[0] != index\r\n      setTimeout =>\r\n        @frameFinished frame, true\r\n      , 0\r\n      return\r\n\r\n    worker = @freeWorkers.shift()\r\n    task = @getTask frame\r\n\r\n    @log \"starting frame #{ task.index + 1 } of #{ @frames.length }\"\r\n    @activeWorkers.push worker\r\n    worker.postMessage task#, [task.data.buffer]\r\n\r\n  getContextData: (ctx) ->\r\n    return ctx.getImageData(0, 0, @options.width, @options.height).data\r\n\r\n  getImageData: (image) ->\r\n    if not @_canvas?\r\n      @_canvas = document.createElement 'canvas'\r\n      @_canvas.width = @options.width\r\n      @_canvas.height = @options.height\r\n\r\n    ctx = @_canvas.getContext '2d'\r\n    ctx.setFill = @options.background\r\n    ctx.fillRect 0, 0, @options.width, @options.height\r\n    ctx.drawImage image, 0, 0\r\n\r\n    return @getContextData ctx\r\n\r\n  getTask: (frame) ->\r\n    index = @frames.indexOf frame\r\n    task =\r\n      index: index\r\n      last: index is (@frames.length - 1)\r\n      delay: frame.delay\r\n      transparent: frame.transparent\r\n      width: @options.width\r\n      height: @options.height\r\n      quality: @options.quality\r\n      dither: @options.dither\r\n      globalPalette: @options.globalPalette\r\n      repeat: @options.repeat\r\n      canTransfer: true\r\n\r\n    if frame.data?\r\n      task.data = frame.data\r\n    else if frame.context?\r\n      task.data = @getContextData frame.context\r\n    else if frame.image?\r\n      task.data = @getImageData frame.image\r\n    else\r\n      throw new Error 'Invalid frame'\r\n\r\n    return task\r\n\r\n  log: (msg) ->\r\n    console.log msg if @options.debug\r\n\r\nmodule.exports = GIF\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/gif.coffee\n **/","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/events/events.js\n ** module id = 1\n ** module chunks = 0\n **/","### CoffeeScript version of the browser detection from MooTools ###\r\n\r\nua = navigator.userAgent.toLowerCase()\r\nplatform = navigator.platform.toLowerCase()\r\nUA = ua.match(/(opera|ie|firefox|chrome|version)[\\s\\/:]([\\w\\d\\.]+)?.*?(safari|version[\\s\\/:]([\\w\\d\\.]+)|$)/) or [null, 'unknown', 0]\r\nmode = UA[1] == 'ie' && document.documentMode\r\n\r\nbrowser =\r\n  name: if UA[1] is 'version' then UA[3] else UA[1]\r\n  version: mode or parseFloat(if UA[1] is 'opera' && UA[4] then UA[4] else UA[2])\r\n\r\n  platform:\r\n    name: if ua.match(/ip(?:ad|od|hone)/) then 'ios' else (ua.match(/(?:webos|android)/) or platform.match(/mac|win|linux/) or ['other'])[0]\r\n\r\nbrowser[browser.name] = true\r\nbrowser[browser.name + parseInt(browser.version, 10)] = true\r\nbrowser.platform[browser.platform.name] = true\r\n\r\nmodule.exports = browser\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/browser.coffee\n **/"],"sourceRoot":""}